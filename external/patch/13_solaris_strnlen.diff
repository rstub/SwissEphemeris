diff --git a/src/libswe/sweodef.h b/src/libswe/sweodef.h
index 03994b1..e3530a6 100644
--- a/src/libswe/sweodef.h
+++ b/src/libswe/sweodef.h
@@ -174,6 +174,18 @@
 #  include <unistd.h>
 #endif
 
+#if defined(sun) || defined(__sun)
+static size_t  my_strnlen(const char*  str, size_t  maxlen)
+{
+    char *p = memchr(str, 0, maxlen);
+    if (p == NULL)
+       return maxlen;
+    else
+       return (p - str);
+}
+#define strnlen(x,y) my_strnlen((x),(y))
+#endif /* sun || __sun */
+
 /*
  * if we have 16-bit ints, we define INT_16; we will need %ld to printf an int32
  * if we have 64-bit long, we define LONG_64
